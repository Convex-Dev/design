# Claude Code Guidelines for Convex Documentation

## Project Overview

This is the **Convex Documentation** site (`docs.convex.world`), built with Docusaurus 3.9. It contains comprehensive documentation for the Convex decentralised lattice platform.

## Key Principles

### 1. Language and Spelling
- **Use British English throughout** (decentralised, organisation, colour, etc.)
- This is a hard requirement for consistency with Convex branding
- Check existing content for spelling patterns when uncertain

### 2. Documentation Structure

The site has four main documentation sections:

#### `/docs/intro`
- Welcome page with vision, story, and motivation
- First touchpoint for newcomers
- Should be warm, inspiring, and accessible

#### `/docs/overview/`
- **Auto-generated sidebar** from `docs/overview/` directory
- Order controlled by `sidebar_position` frontmatter
- Current structure:
  1. Overview (index) - Landing page
  2. Key Concepts - Core building blocks
  3. Lattice Technology - Technical foundation
  4. Use Cases - What you can build
  5. Performance - Benchmarks
  6. Governance - Network management
  7. White Paper - Deep technical specs
  8. Manifesto - Vision and philosophy
  9. FAQ - Common questions

#### `/docs/tutorial/`
- **Manually structured sidebar** in `sidebars.ts`
- Practical user guide and tutorials
- Current structure:
  - User Guide (index)
  - Quick Start
  - Networks
  - Client SDKs (TypeScript, JavaScript, Java, Python)
  - Convex Coins
  - Convex Lisp
  - Actor Development
  - Recipes
  - Peer Operations
  - Glossary

#### `/docs/products/`
- Auto-generated from `docs/products/`
- Product-specific documentation

#### `/docs/cad/`
- Auto-generated from `docs/cad/`
- Convex Architecture Documents (technical specifications)

### 3. Linking Between Pages

**For autogenerated sidebars** (overview, products, CADs):
- Use full absolute paths: `/docs/overview/concepts`
- Relative links don't resolve correctly in Docusaurus autogenerated sidebars

**For manual sidebars** (tutorial):
- Use relative paths within the same section: `client-sdks/typescript`
- Use absolute paths for cross-section links: `/docs/overview/lattice`

**Common mistake**: Using `./filename` or just `filename` in autogenerated sidebars - these resolve incorrectly

### 4. Content Guidelines

**Writing Style**:
- Clear, concise, and accessible
- Avoid jargon where possible; explain technical terms when necessary
- Use active voice and present tense
- Keep landing pages short and signpost-style
- Provide practical examples in guides

**Code Examples**:
- Prefer Java, TypeScript, and Python (the main SDKs)
- Include complete, runnable examples
- Show imports and setup, not just snippets
- Comment non-obvious parts

**Technical Terminology**:
- **Convex Coins (CVM)** - Native utility token
- **Juice** - Transaction execution cost (never "gas" - that's Ethereum)
- **Copper** - Smallest unit (1 CVM = 1,000,000,000 copper)
- **Peer** - Network node
- **Actor** - Smart contract
- **Ed25519** - Cryptographic signature algorithm
- **CPoS** - Convergent Proof of Stake

**Network Names**:
- **Protonet** - Production network (peer.convex.live)
- **HuggingFace Testnet** - Public test network
- **Local Peer** - Development environment

### 5. Homepage and Navigation

**Homepage buttons** (`src/pages/index.tsx`):
- Three buttons creating a user journey
- Current: "Why Convex?" → "Overview" → "Start Building"
- Should guide users from motivation to understanding to action

**Sidebar configuration** (`sidebars.ts`):
- Tutorial sidebar is manually structured for precise control
- Other sidebars auto-generated for simplicity
- Categories can have `link` property to make headers clickable

### 6. Common Issues

**MDX Parsing**:
- `<1ms` breaks MDX (thinks it's an HTML tag)
- Use `&lt;1ms` instead

**Broken Links**:
- Run `pnpm build` to check for broken links
- Dev server may cache old links - restart if needed

**Frontmatter**:
- Always include `sidebar_position` for ordering in autogenerated sidebars
- Use `title` to override default (filename-based) titles
- `permalink` for custom URLs (use sparingly)

### 7. Development Workflow

**Setup**:
```bash
cd design
pnpm install
pnpm start  # Dev server on localhost:3000
```

**Build and verify**:
```bash
pnpm build      # Check for broken links and build errors
pnpm serve      # Serve production build locally
pnpm typecheck  # TypeScript validation
```

**File locations**:
- Documentation: `docs/`
- React components: `src/components/`
- Pages: `src/pages/`
- Static assets: `static/`
- Configuration: `docusaurus.config.ts`, `sidebars.ts`

### 8. Before Committing

- [ ] Run `pnpm build` - must succeed
- [ ] Check for broken links in build output
- [ ] Verify British English spelling
- [ ] Test navigation flow makes sense
- [ ] Check code examples are complete and runnable
- [ ] Ensure technical terms are correct (juice not gas, Ed25519 not Ed255198)

### 9. Getting Help

- **Discord**: [Convex Community](https://discord.com/invite/xfYGq4CT7v)
- **GitHub**: [Convex-Dev/convex](https://github.com/Convex-Dev/convex)
- **Docusaurus Docs**: [docusaurus.io](https://docusaurus.io)

## Quick Reference

**Add a new page to Overview**:
1. Create `docs/overview/your-page.md`
2. Add frontmatter with `sidebar_position: N`
3. Rebuild - auto-appears in sidebar

**Add a new page to Tutorial**:
1. Create `docs/tutorial/your-page.md`
2. Edit `sidebars.ts` to add `'tutorial/your-page'`
3. Rebuild

**Reorder Tutorial sections**:
1. Edit `sidebars.ts` - move items in `tutorialSidebar` array
2. Rebuild

**Change homepage**:
1. Edit `src/pages/index.tsx`
2. Rebuild
